# Update 20/12/20

В данной папке содержатся следующие файлы:
* Папка **dicts**. Сожержит пиклы с листами словарей. Каждый словарь это 1 выборы. Примерная структура:
    $\Bigg\{url:\Bigg[\begin{matrix}
 "direct":[list of links to UIK]\\
  location level 2:\{location level 2:[list of links to UIK]\}
\end{matrix}\Bigg\}$
    - Также в данной папке хранится шлак пиклов - результатов прогона кода по ссылкам после останова (try - except) дал о себе знать
    - Все ссылки, по которым код не пробежал хранятся в пикле failed_links.
    - Всего 44 живых пикла с данными и 1 с поломанными ссылками.
* **all_level_links.csv.txt** - Файл с оригинальной ветки
* **Start Page Collection.ipynb** - Сбор данных со стартовой страницы. Выборка - все выборы с 2010 года. База - 95к результатов. Почистил немного.
* **start_page_2010.csv** - Результаты прогона предыдущего файла. 
* **preliminary.py** - Основной ранер. Пока не рефакторил. 
    - detect_captcha_text - добавил условие на нулевую капчу. Выдает 00000 для получения новой картинки.
    - replace_o_as_0 - без изменений
    - find_and_recognize_captcha - без изменений
    - get_through_captcha - добавил проверку наличия капчи на странице. 
    - get_election_result - подправил селекторы. Старые селекторы не обобщаются (куча кейсов, где изначальный текст не подходил). Вместо сохранения файла и чистки эксель файла, решил потестить пандас. Пока вроде норм работает
    - test_if_new_layers - основной ранер для сбора ссылок по УИК. Данные хранятся по принципу, указанному в **dicts**
    - back_steps - побочная функция для предыдущей. Ищет сколько переходов на предыдущую страницу необходимо сделать, чтобы прогнать по всем УИК в рамках указанного верхнего уровня
    - get_links_UIK - ранит **test_if_new_layers** 
    - runner - собирает таблички для указанного списка ссылок (с задатком для мультипроцессинга) раня **get_election_result**
* **Cleaner.ipynb** - Сопоставляет базу данных из **start_page_2010.csv** с пиклами в **dict**. Рефакторинг требуется. Функции безымянные. но, в целом, логика должна быть ясна.
* **preliminary_results.csv** - Результат прогона предыдущего файла. Из 44 пиклов было выгружено 744 словаря. На выходе унормализации было получено около 6к УИК ссылок.
* тессеракт.